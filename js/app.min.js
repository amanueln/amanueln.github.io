function initMap(){function i(){var t="https://api.foursquare.com/v2/venues/search?ll="+places()[a].location.lat+","+places()[a].location.lng+"&client_id="+n+"&client_secret="+r+"&v=20180803&query="+places()[a].title;$.when($.getJSON(t)).done(function(t){var i=t.response.venues[0],a="https://api.foursquare.com/v2/venues/"+i.id+"?&client_id="+n+"&client_secret="+r+"&v=20180803";$.when($.getJSON(a)).done(function(t){var n=t,r=n.response.venue.bestPhoto.suffix,a={lat:i.location.lat,lng:i.location.lng},l=new google.maps.Marker({position:a,map:o,title:i.name,description:n.response.venue.description,animation:google.maps.Animation.DROP,id:i.id,url:n.response.venue.url,categories:n.response.venue.categories[0],img:r,address:i.location.formattedAddress,contact:n.response.venue.contact.formattedPhone,hours:n.response.venue.hours.status,rating:n.response.venue.rating,ratingColor:n.response.venue.ratingColor});l.addListener("click",function(){s(this,e)}),markers.push(l)})}).fail(function(){alert("FOURSQUARE BROKE: ISSUE WITH API REQUEST")})}function s(e,t){var n='<div id="content" class="text-center text-uppercase"><div id="siteNotice"></div><div id="bodyContent"><h4><b " onerror="titleError()">'+e.title+'</h4></b><div id="venueImg" class="image"><img src="https://igx.4sqi.net/img/general/300x300'+e.img+'" onerror="imageError()"  alt=""</div><div><hr><p>Venue hours:</p><h5>'+e.hours+'</h5></div><div><br><p>Rated:</p><h5><font color="'+e.ratingColor+'">'+e.rating+'</font>/10</h5><hr></div><div><p>for more information visit:</p></div><a href="'+e.url+'" target="_blank">'+e.url+"</div></div>";e&&(t.marker=e,t.setContent(n),o.getBounds(t.marker.getPosition()),t.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){t.marker.setAnimation(null)},1400),t.open(o,e),o.setZoom(16),o.setCenter(t.marker.getPosition()),t.addListener("closeclick",function(){t.setMarker=null,t.marker.setAnimation(null),o.setZoom(12)}))}window.onerror=function(e,t,o,n,r){var i=e.toLowerCase(),a="script error";if(i.indexOf(a)>-1)alert("Script Error: See Browser Console for Detail");else{var s=["Message: "+e,"Line: "+o,"Column: "+n].join(" - ");document.getElementById("alert").innerHTML=s}return!1},ko.applyBindings(new AppViewModel),google.maps.event.addDomListener(window,"resize",function(){o.setCenter(t)});for(var e=new google.maps.InfoWindow,t={lat:40.7298,lng:-73.9767},o=new google.maps.Map(document.getElementById("map"),{zoom:12,center:t}),n="LH33HAMSV5DNQWAJQLTNGJBF23EFGHIC0CMC5SMHELD3VA4Y",r="4GZY5OVE2NLVEU2GPW2U5KFKCZLXG3YQMRVBZ4ZK5NTF35EQ",a=0;a<places().length;a++)i(places());infoList=function(t){s(this,e)}}function AppViewModel(){listInput=ko.observable(""),searchedNames=ko.computed(function(){var e=listInput().toLowerCase();return e?ko.utils.arrayFilter(markers(),function(t){var o=t.title.toLowerCase().search(e)>=0;return t.setVisible(o),o}):(ko.utils.arrayForEach(markers(),function(e){e.setVisible(!0)}),markers())})}var markers=ko.observableArray();places=ko.observableArray([{title:"Dun-Well Doughnuts",location:{lat:40.707365,lng:-73.940256}},{title:"Empire State Building",location:{lat:40.748817,lng:-73.985428}},{title:"The Spotted Pig",location:{lat:40.7356,lng:-74.0067}},{title:"central park zoo ",location:{lat:40.7678,lng:-73.9718}},{title:"Central Park",location:{lat:40.7829,lng:-73.9654}},{title:"times square",location:{lat:40.7589,lng:-73.9851}},{title:"Museum of Modern Art",location:{lat:40.7614,lng:-73.9776}}]);