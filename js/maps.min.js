function initMap(){function l(e,t){function o(){return e.url?e.url:e.url("link broken")}var i='<div id="content" class="text-center text-uppercase"><div id="siteNotice"></div><div id="bodyContent"><p><b>'+e.title+'</p></b><div class="image"><img src="https://igx.4sqi.net/img/general/300x300'+e.img+'" alt="" width="250" height="100"></div><div><hr><strong>for info:'+e.contact+'</strong></div><a href="'+o()+'" target="_blank">'+o()+"</div></div>";t.marker!=e&&(t.marker=e,t.setContent(i),t.marker.setAnimation(google.maps.Animation.BOUNCE),t.open(n,e),n.setZoom(16),n.getBounds(e.getPosition()),n.setCenter(e.getPosition()),t.addListener("closeclick",function(){t.setMarker=null,t.marker.setAnimation(null),n.setZoom(12)}))}ko.applyBindings(new AppViewModel),google.maps.event.addDomListener(window,"resize",function(){n.setCenter(t)});for(var e=new google.maps.InfoWindow,t={lat:40.7298,lng:-73.9767},n=new google.maps.Map(document.getElementById("map"),{zoom:12,center:t}),o="2MOJGD2ZXSFWICVGMQUXESVOMQIRJ0IPAL3BB310XF4N1VJE",i="MQXUQS3HOYW4N1BTMA5AN3KM1TS2PDHPEQCW2T5RWGA2CN4V",a=0;a<places().length;a++){var r="https://api.foursquare.com/v2/venues/search?ll="+places()[a].location.lat+","+places()[a].location.lng+"&client_id="+o+"&client_secret="+i+"&v=20180803&query="+places()[a].title;$.when($.getJSON(r)).done(function(t){var a=t.response.venues[0];console.log(a);var r="https://api.foursquare.com/v2/venues/"+a.id+"/photos?&client_id="+o+"&client_secret="+i+"&v=20180803";$.getJSON(r,function(t){console.log(a.location.formattedAddress);var o=t.response.photos.items[0].suffix,i={lat:a.location.lat,lng:a.location.lng},r=new google.maps.Marker({position:i,map:n,title:a.name,animation:google.maps.Animation.DROP,id:a.id,url:a.url,categories:a.categories,img:o,address:a.location.formattedAddress,contact:a.contact.formattedPhone});r.addListener("click",function(){l(this,e)}),markers.push(r)})}).fail(function(){alert("foursquare broke")})}infoList=function(t){l(this,e)}}function AppViewModel(){places=ko.observableArray([{title:"Dun-Well Doughnuts",location:{lat:40.707365,lng:-73.940256}},{title:"Empire State Building",location:{lat:40.748817,lng:-73.985428}},{title:"The Spotted Pig",location:{lat:40.7356,lng:-74.0067}},{title:"central park zoo ",location:{lat:40.7678,lng:-73.9718}},{title:"Central Park",location:{lat:40.7829,lng:-73.9654}},{title:"times square ",location:{lat:40.7589,lng:-73.9851}}]),listInput=ko.observable(""),searchedNames=ko.computed(function(){var e=listInput().toLowerCase();return e?ko.utils.arrayFilter(markers,function(t){var n=t.title.toLowerCase().search(e)>=0;return t.setVisible(n),n}):(ko.utils.arrayForEach(markers,function(e){e.setVisible(!0)}),markers)})}var markers=[];