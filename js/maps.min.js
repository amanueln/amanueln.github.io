function initMap(){function s(e,t){function o(){return e.url?e.url:e.url("link broken")}var r='<div id="content" class="text-center text-uppercase"><div id="siteNotice"></div><div id="bodyContent"><h3><b>'+e.title+'</h3></b><div class="image"><img src="https://igx.4sqi.net/img/general/300x300'+e.img+'" alt="" width="300" height="300"></div><div><hr><p>Venue hours:</p><h5>'+e.hours+'</h5></div><div><br><p>Rated:</p><h5><font color="'+e.ratingColor+'">'+e.rating+'</font>/10</h5><hr></div><div><p>for more information visit:</p></div><a href="'+o()+'" target="_blank">'+o()+"</div></div>";e&&(t.marker=e,t.setContent(r),t.marker.setAnimation(google.maps.Animation.BOUNCE),t.open(n,e),n.setZoom(16),n.getBounds(e.getPosition()),n.setCenter(e.getPosition()),t.addListener("closeclick",function(){t.setMarker=null,t.marker.setAnimation(null),n.setZoom(12)}))}window.onerror=function(e,t,n,o,r){var i=e.toLowerCase(),a="script error";if(i.indexOf(a)>-1)alert("Script Error: See Browser Console for Detail");else{var s=["Message: "+e,"Line: "+n,"Column: "+o].join(" - ");document.getElementById("alert").innerHTML=s}return!1},ko.applyBindings(new AppViewModel),google.maps.event.addDomListener(window,"resize",function(){n.setCenter(t)});for(var e=new google.maps.InfoWindow,t={lat:40.7298,lng:-73.9767},n=new google.maps.Map(document.getElementById("map"),{zoom:12,center:t}),o="BGX3NSCSYPUS55B2V41WUWGAQCQNI4Y14C4TCCF5GSXUBP1M",r="FHQLRL23BJ3UIBJ5PILYFGX2YGU2HLKUP3BFDZMHN4GIQKN2",i=0;i<places().length;i++){var a="https://api.foursquare.com/v2/venues/search?ll="+places()[i].location.lat+","+places()[i].location.lng+"&client_id="+o+"&client_secret="+r+"&v=20180803&query="+places()[i].title;$.when($.getJSON(a)).done(function(t){var i=t.response.venues[0],a="https://api.foursquare.com/v2/venues/"+i.id+"?&client_id="+o+"&client_secret="+r+"&v=20180803";$.when($.getJSON(a)).done(function(t){var o=t,r=o.response.venue.bestPhoto.suffix,a={lat:i.location.lat,lng:i.location.lng},l=new google.maps.Marker({position:a,map:n,title:i.name,description:o.response.venue.description,animation:google.maps.Animation.DROP,id:i.id,url:o.response.venue.url,categories:o.response.venue.categories[0],img:r,address:i.location.formattedAddress,contact:o.response.venue.contact.formattedPhone,hours:o.response.venue.hours.status,rating:o.response.venue.rating,ratingColor:o.response.venue.ratingColor});l.addListener("click",function(){s(this,e)}),markers.push(l)})}).fail(function(){alert("FOURSQUARE BROKE: TOO MANY API CALLS. WAIT 24 HOURS")})}infoList=function(t){s(this,e)}}function AppViewModel(){places=ko.observableArray([{title:"Dun-Well Doughnuts",location:{lat:40.707365,lng:-73.940256}},{title:"Empire State Building",location:{lat:40.748817,lng:-73.985428}},{title:"The Spotted Pig",location:{lat:40.7356,lng:-74.0067}},{title:"central park zoo ",location:{lat:40.7678,lng:-73.9718}},{title:"Central Park",location:{lat:40.7829,lng:-73.9654}},{title:"times square",location:{lat:40.7589,lng:-73.9851}},{title:"Museum of Modern Art",location:{lat:40.7614,lng:-73.9776}}]),listInput=ko.observable(""),searchedNames=ko.computed(function(){var e=listInput().toLowerCase();return console.log(e),e?ko.utils.arrayFilter(markers,function(t){var n=t.title.toLowerCase().search(e)>=0;return t.setVisible(n),n}):(ko.utils.arrayForEach(markers,function(e){e.setVisible(!0)}),markers)})}var markers=[];